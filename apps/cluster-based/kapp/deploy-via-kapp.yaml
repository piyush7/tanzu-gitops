apiVersion: v1
kind: ServiceAccount
metadata:
  name: extensions-deploy-sa
  namespace: default
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: package-install-admin-role
rules:
- apiGroups:
  - '*'
  resources:
  - '*'
  verbs:
  - '*'
- nonResourceURLs:
  - '*'
  verbs:
  - '*'
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: extensions-deploy-crb
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: package-install-admin-role
subjects:
- kind: ServiceAccount
  name: extensions-deploy-sa
  namespace: default
---
apiVersion: v1
data:
  values.yaml: I0BkYXRhL3ZhbHVlcwotLS0KdGtnZXh0ZW5zaW9uczoKICBpbWFnZTogcHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvdGtnLWV4dGVuc2lvbnMtdGVtcGxhdGVzOnYxLjMuMV92bXdhcmUuMQpzaGFyZWQ6CiAgaW5ncmVzczogdGVzdC5oMm8tNC01NTY0Lmgyby52bXdhcmUuY29tCmNvbnRvdXI6CiAgZGVwbG95OiB0cnVlCiAgb3ZlcmxheTogfAogICAgaW5mcmFzdHJ1Y3R1cmVfcHJvdmlkZXI6ICJ2c3BoZXJlIgogICAgY29udG91cjoKICAgICAgaW1hZ2U6CiAgICAgICAgcmVwb3NpdG9yeTogcHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cKICAgIGVudm95OgogICAgICBpbWFnZToKICAgICAgICByZXBvc2l0b3J5OiBwcm9qZWN0cy5yZWdpc3RyeS52bXdhcmUuY29tL3RrZwogICAgICBzZXJ2aWNlOgogICAgICAgIHR5cGU6ICJMb2FkQmFsYW5jZXIiCnByb21ldGhldXM6CiAgZGVwbG95OiB0cnVlCiAgb3ZlcmxheTogfAogICAgbW9uaXRvcmluZzoKICAgICAgcHJvbWV0aGV1c19zZXJ2ZXI6CiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZXBvc2l0b3J5OiBwcm9qZWN0cy5yZWdpc3RyeS52bXdhcmUuY29tL3RrZy9wcm9tZXRoZXVzCiAgICAgIGFsZXJ0bWFuYWdlcjoKICAgICAgICBpbWFnZToKICAgICAgICAgIHJlcG9zaXRvcnk6IHByb2plY3RzLnJlZ2lzdHJ5LnZtd2FyZS5jb20vdGtnL3Byb21ldGhldXMKICAgICAga3ViZV9zdGF0ZV9tZXRyaWNzOgogICAgICAgIGltYWdlOgogICAgICAgICAgcmVwb3NpdG9yeTogcHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvcHJvbWV0aGV1cwogICAgICBub2RlX2V4cG9ydGVyOgogICAgICAgIGltYWdlOgogICAgICAgICAgcmVwb3NpdG9yeTogcHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvcHJvbWV0aGV1cwogICAgICBwdXNoZ2F0ZXdheToKICAgICAgICBpbWFnZToKICAgICAgICAgIHJlcG9zaXRvcnk6IHByb2plY3RzLnJlZ2lzdHJ5LnZtd2FyZS5jb20vdGtnL3Byb21ldGhldXMKICAgICAgY2Fkdmlzb3I6CiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZXBvc2l0b3J5OiBwcm9qZWN0cy5yZWdpc3RyeS52bXdhcmUuY29tL3RrZy9wcm9tZXRoZXVzCiAgICAgIHByb21ldGhldXNfc2VydmVyX2NvbmZpZ21hcF9yZWxvYWQ6CiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZXBvc2l0b3J5OiBwcm9qZWN0cy5yZWdpc3RyeS52bXdhcmUuY29tL3RrZy9wcm9tZXRoZXVzCiAgICAgIHByb21ldGhldXNfc2VydmVyX2luaXRfY29udGFpbmVyOgogICAgICAgIGltYWdlOgogICAgICAgICAgcmVwb3NpdG9yeTogcHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvcHJvbWV0aGV1cwpncmFmYW5hOgogIGRlcGxveTogdHJ1ZQogIG92ZXJsYXk6IHwKICAgIG1vbml0b3Jpbmc6CiAgICAgIGdyYWZhbmE6CiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZXBvc2l0b3J5OiAicHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvZ3JhZmFuYSIKICAgICAgICBzZWNyZXQ6CiAgICAgICAgICB0eXBlOiAiT3BhcXVlIgogICAgICAgICAgYWRtaW5fcGFzc3dvcmQ6ICJWazEzWVhKbE1TRT0iCiAgICAgIGdyYWZhbmFfaW5pdF9jb250YWluZXI6CiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZXBvc2l0b3J5OiAicHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvZ3JhZmFuYSIKICAgICAgZ3JhZmFuYV9zY19kYXNoYm9hcmQ6CiAgICAgICAgaW1hZ2U6CiAgICAgICAgICByZXBvc2l0b3J5OiAicHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvZ3JhZmFuYSIKZWZrOgogIGRlcGxveToKICAgIGVsYXN0aWNzZWFyY2g6IHRydWUKICAgIGZsdWVudGJpdDogdHJ1ZQogICAga2liYW5hOiB0cnVlCiAgaW1hZ2VzOgogICAgZWxhc3RpY3NlYXJjaDoKICAgICAgZWxhc3RpY3NlYXJjaDogcHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90YW56dV9tZXRhX3BvY3MvZXh0ZW5zaW9ucy9lbGFzdGljc2VhcmNoOjcuMi4xCiAgICAgIHNoZWxsOiBwcm9qZWN0cy5yZWdpc3RyeS52bXdhcmUuY29tL3Rhbnp1X21ldGFfcG9jcy9leHRlbnNpb25zL2JpdG5hbWktc2hlbGw6MTAtZGViaWFuLTEwLXIxMzgKICAgIGtpYmFuYToKICAgICAga2liYW5hOiBwcm9qZWN0cy5yZWdpc3RyeS52bXdhcmUuY29tL3Rhbnp1X21ldGFfcG9jcy9leHRlbnNpb25zL2tpYmFuYTo3LjIuMQogIG92ZXJsYXk6IHwKICAgIGxvZ2dpbmc6CiAgICAgIGltYWdlOgogICAgICAgIHJlcG9zaXRvcnk6IHByb2plY3RzLnJlZ2lzdHJ5LnZtd2FyZS5jb20vdGtnCiAgICB0a2c6CiAgICAgIGluc3RhbmNlX25hbWU6ICJUS0dfSU5TVEFOQ0VfTkFNRSIKICAgICAgY2x1c3Rlcl9uYW1lOiAiQ0xVU1RFUl9OQU1FIgogICAgZmx1ZW50X2JpdDoKICAgICAgb3V0cHV0X3BsdWdpbjogImVsYXN0aWNzZWFyY2giCiAgICAgIGVsYXN0aWNzZWFyY2g6CiAgICAgICAgaG9zdDogImVsYXN0aWNzZWFyY2giCiAgICAgICAgcG9ydDogIjkyMDAiCmhhcmJvcjoKICBkZXBsb3k6IHRydWUKICBvdmVybGF5OiB8CiAgICBpbWFnZToKICAgICAgcmVwb3NpdG9yeTogcHJvamVjdHMucmVnaXN0cnkudm13YXJlLmNvbS90a2cvaGFyYm9yCiAgICAgIHRhZzogdjIuMS4zX3Ztd2FyZS4xCiAgICAgIHB1bGxQb2xpY3k6IElmTm90UHJlc2VudAogICAgbmFtZXNwYWNlOiB0YW56dS1zeXN0ZW0tcmVnaXN0cnkKICAgIGhvc3RuYW1lOiBjb3JlLmhhcmJvci5kb21haW4KICAgIHBvcnQ6CiAgICAgIGh0dHBzOiA0NDMKICAgIHRsc0NlcnRpZmljYXRlOgogICAgICAjIFtSZXF1aXJlZF0gdGhlIGNlcnRpZmljYXRlCiAgICAgIHRscy5jcnQ6CiAgICAgICMgW1JlcXVpcmVkXSB0aGUgcHJpdmF0ZSBrZXkKICAgICAgdGxzLmtleToKICAgICAgIyBbT3B0aW9uYWxdIHRoZSBjZXJ0aWZpY2F0ZSBvZiBDQSwgdGhpcyBlbmFibGVzIHRoZSBkb3dubG9hZAogICAgICAjIGxpbmsgb24gcG9ydGFsIHRvIGRvd25sb2FkIHRoZSBjZXJ0aWZpY2F0ZSBvZiBDQQogICAgICBjYS5jcnQ6CiAgICAKICAgICMgVXNlIGNvbnRvdXIgaHR0cCBwcm94eSBpbnN0ZWFkIG9mIHRoZSBpbmdyZXNzIHdoZW4gaXQncyB0cnVlCiAgICBlbmFibGVDb250b3VySHR0cFByb3h5OiB0cnVlCiAgICAKICAgICMgW1JlcXVpcmVkXSBUaGUgaW5pdGlhbCBwYXNzd29yZCBvZiBIYXJib3IgYWRtaW4uCiAgICBoYXJib3JBZG1pblBhc3N3b3JkOiAiSGFyYm9yMTIzNDUiCiAgICAKICAgICMgW1JlcXVpcmVkXSBUaGUgc2VjcmV0IGtleSB1c2VkIGZvciBlbmNyeXB0aW9uLiBNdXN0IGJlIGEgc3RyaW5nIG9mIDE2IGNoYXJzLgogICAgc2VjcmV0S2V5OiA0NHo1bW1UUmlEQWQzcjdvCiAgICAKICAgIGRhdGFiYXNlOgogICAgICAjIFtSZXF1aXJlZF0gVGhlIGluaXRpYWwgcGFzc3dvcmQgb2YgdGhlIHBvc3RncmVzIGRhdGFiYXNlLgogICAgICBwYXNzd29yZDogNDR6NW1tVFJpREFkM3I3bwogICAgCiAgICBjb3JlOgogICAgICByZXBsaWNhczogMQogICAgICAjIFtSZXF1aXJlZF0gU2VjcmV0IGlzIHVzZWQgd2hlbiBjb3JlIHNlcnZlciBjb21tdW5pY2F0ZXMgd2l0aCBvdGhlciBjb21wb25lbnRzLgogICAgICBzZWNyZXQ6IDQ0ejVtbVRSaURBZDNyN28KICAgICAgIyBbUmVxdWlyZWRdIFRoZSBYU1JGIGtleS4gTXVzdCBiZSBhIHN0cmluZyBvZiAzMiBjaGFycy4KICAgICAgeHNyZktleTogRG52UU41MDhNOTdtR210SzkyNDhzQ1EwcEZEODJCaFYKICAgIGpvYnNlcnZpY2U6CiAgICAgIHJlcGxpY2FzOiAxCiAgICAgICMgW1JlcXVpcmVkXSBTZWNyZXQgaXMgdXNlZCB3aGVuIGpvYiBzZXJ2aWNlIGNvbW11bmljYXRlcyB3aXRoIG90aGVyIGNvbXBvbmVudHMuCiAgICAgIHNlY3JldDogNDR6NW1tVFJpREFkM3I3bwogICAgcmVnaXN0cnk6CiAgICAgIHJlcGxpY2FzOiAxCiAgICAgICMgW1JlcXVpcmVkXSBTZWNyZXQgaXMgdXNlZCB0byBzZWN1cmUgdGhlIHVwbG9hZCBzdGF0ZSBmcm9tIGNsaWVudAogICAgICAjIGFuZCByZWdpc3RyeSBzdG9yYWdlIGJhY2tlbmQuCiAgICAgICMgU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZG9ja2VyL2Rpc3RyaWJ1dGlvbi9ibG9iL21hc3Rlci9kb2NzL2NvbmZpZ3VyYXRpb24ubWQjaHR0cAogICAgICBzZWNyZXQ6IDQ0ejVtbVRSaURBZDNyN28KICAgIG5vdGFyeToKICAgICAgIyBXaGV0aGVyIHRvIGluc3RhbGwgTm90YXJ5CiAgICAgIGVuYWJsZWQ6IHRydWUKICAgIGNsYWlyOgogICAgICAjIFdoZXRoZXIgdG8gaW5zdGFsbCBDbGFpciBzY2FubmVyCiAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgcmVwbGljYXM6IDEKICAgICAgIyBUaGUgaW50ZXJ2YWwgb2YgY2xhaXIgdXBkYXRlcnMsIHRoZSB1bml0IGlzIGhvdXIsIHNldCB0byAwIHRvCiAgICAgICMgZGlzYWJsZSB0aGUgdXBkYXRlcnMKICAgICAgdXBkYXRlcnNJbnRlcnZhbDogMTIKICAgIHRyaXZ5OgogICAgICAjIGVuYWJsZWQgdGhlIGZsYWcgdG8gZW5hYmxlIFRyaXZ5IHNjYW5uZXIKICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICByZXBsaWNhczogMQogICAgICAjIGdpdEh1YlRva2VuIHRoZSBHaXRIdWIgYWNjZXNzIHRva2VuIHRvIGRvd25sb2FkIFRyaXZ5IERCCiAgICAgIGdpdEh1YlRva2VuOiAiIgogICAgICAjIHNraXBVcGRhdGUgdGhlIGZsYWcgdG8gZGlzYWJsZSBUcml2eSBEQiBkb3dubG9hZHMgZnJvbSBHaXRIdWIKICAgICAgIwogICAgICAjIFlvdSBtaWdodCB3YW50IHRvIHNldCB0aGUgdmFsdWUgb2YgdGhpcyBmbGFnIHRvIGB0cnVlYCBpbiB0ZXN0IG9yIENJL0NEIGVudmlyb25tZW50cyB0byBhdm9pZCBHaXRIdWIgcmF0ZSBsaW1pdGluZyBpc3N1ZXMuCiAgICAgICMgSWYgdGhlIHZhbHVlIGlzIHNldCB0byBgdHJ1ZWAgeW91IGhhdmUgdG8gbWFudWFsbHkgZG93bmxvYWQgdGhlIGB0cml2eS5kYmAgZmlsZSBhbmQgbW91bnQgaXQgaW4gdGhlCiAgICAgICMgYC9ob21lL3NjYW5uZXIvLmNhY2hlL3RyaXZ5L2RiL3RyaXZ5LmRiYCBwYXRoLgogICAgICBza2lwVXBkYXRlOiBmYWxzZQogICAgCiAgICAjIFRoZSBwZXJzaXN0ZW5jZSBpcyBhbHdheXMgZW5hYmxlZCBhbmQgYSBkZWZhdWx0IFN0b3JhZ2VDbGFzcwogICAgIyBpcyBuZWVkZWQgaW4gdGhlIGs4cyBjbHVzdGVyIHRvIHByb3Zpc2lvbiB2b2x1bWVzIGR5bmFtaWNseS4KICAgICMgU3BlY2lmeSBhbm90aGVyIFN0b3JhZ2VDbGFzcyBpbiB0aGUgInN0b3JhZ2VDbGFzcyIgb3Igc2V0ICJleGlzdGluZ0NsYWltIgogICAgIyBpZiB5b3UgaGF2ZSBhbHJlYWR5IGV4aXN0aW5nIHBlcnNpc3RlbnQgdm9sdW1lcyB0byB1c2UKICAgICMKICAgICMgRm9yIHN0b3JpbmcgaW1hZ2VzIGFuZCBjaGFydHMsIHlvdSBjYW4gYWxzbyB1c2UgImF6dXJlIiwgImdjcyIsICJzMyIsCiAgICAjICJzd2lmdCIgb3IgIm9zcyIuIFNldCBpdCBpbiB0aGUgImltYWdlQ2hhcnRTdG9yYWdlIiBzZWN0aW9uCiAgICBwZXJzaXN0ZW5jZToKICAgICAgcGVyc2lzdGVudFZvbHVtZUNsYWltOgogICAgICAgIHJlZ2lzdHJ5OgogICAgICAgICAgIyBVc2UgdGhlIGV4aXN0aW5nIFBWQyB3aGljaCBtdXN0IGJlIGNyZWF0ZWQgbWFudWFsbHkgYmVmb3JlIGJvdW5kLAogICAgICAgICAgIyBhbmQgc3BlY2lmeSB0aGUgInN1YlBhdGgiIGlmIHRoZSBQVkMgaXMgc2hhcmVkIHdpdGggb3RoZXIgY29tcG9uZW50cwogICAgICAgICAgZXhpc3RpbmdDbGFpbTogIiIKICAgICAgICAgICMgU3BlY2lmeSB0aGUgInN0b3JhZ2VDbGFzcyIgdXNlZCB0byBwcm92aXNpb24gdGhlIHZvbHVtZS4gT3IgdGhlIGRlZmF1bHQKICAgICAgICAgICMgU3RvcmFnZUNsYXNzIHdpbGwgYmUgdXNlZCh0aGUgZGVmYXVsdCkuCiAgICAgICAgICAjIFNldCBpdCB0byAiLSIgdG8gZGlzYWJsZSBkeW5hbWljIHByb3Zpc2lvbmluZwogICAgICAgICAgc3RvcmFnZUNsYXNzOiAiIgogICAgICAgICAgc3ViUGF0aDogIiIKICAgICAgICAgIGFjY2Vzc01vZGU6IFJlYWRXcml0ZU9uY2UKICAgICAgICAgIHNpemU6IDcwR2kKICAgICAgICBqb2JzZXJ2aWNlOgogICAgICAgICAgZXhpc3RpbmdDbGFpbTogIiIKICAgICAgICAgIHN0b3JhZ2VDbGFzczogIiIKICAgICAgICAgIHN1YlBhdGg6ICIiCiAgICAgICAgICBhY2Nlc3NNb2RlOiBSZWFkV3JpdGVPbmNlCiAgICAgICAgICBzaXplOiAzR2kKICAgICAgICBkYXRhYmFzZToKICAgICAgICAgIGV4aXN0aW5nQ2xhaW06ICIiCiAgICAgICAgICBzdG9yYWdlQ2xhc3M6ICIiCiAgICAgICAgICBzdWJQYXRoOiAiIgogICAgICAgICAgYWNjZXNzTW9kZTogUmVhZFdyaXRlT25jZQogICAgICAgICAgc2l6ZTogM0dpCiAgICAgICAgcmVkaXM6CiAgICAgICAgICBleGlzdGluZ0NsYWltOiAiIgogICAgICAgICAgc3RvcmFnZUNsYXNzOiAiIgogICAgICAgICAgc3ViUGF0aDogIiIKICAgICAgICAgIGFjY2Vzc01vZGU6IFJlYWRXcml0ZU9uY2UKICAgICAgICAgIHNpemU6IDNHaQogICAgICAgIHRyaXZ5OgogICAgICAgICAgZXhpc3RpbmdDbGFpbTogIiIKICAgICAgICAgIHN0b3JhZ2VDbGFzczogIiIKICAgICAgICAgIHN1YlBhdGg6ICIiCiAgICAgICAgICBhY2Nlc3NNb2RlOiBSZWFkV3JpdGVPbmNlCiAgICAgICAgICBzaXplOiA1R2kKICAgICAgIyBEZWZpbmUgd2hpY2ggc3RvcmFnZSBiYWNrZW5kIGlzIHVzZWQgZm9yIHJlZ2lzdHJ5IGFuZCBjaGFydG11c2V1bSB0byBzdG9yZQogICAgICAjIGltYWdlcyBhbmQgY2hhcnRzLiBSZWZlciB0bwogICAgICAjIGh0dHBzOi8vZ2l0aHViLmNvbS9kb2NrZXIvZGlzdHJpYnV0aW9uL2Jsb2IvbWFzdGVyL2RvY3MvY29uZmlndXJhdGlvbi5tZCNzdG9yYWdlCiAgICAgICMgZm9yIHRoZSBkZXRhaWwuCiAgICAgIGltYWdlQ2hhcnRTdG9yYWdlOgogICAgICAgICMgU3BlY2lmeSB3aGV0aGVyIHRvIGRpc2FibGUgYHJlZGlyZWN0YCBmb3IgaW1hZ2VzIGFuZCBjaGFydCBzdG9yYWdlLCBmb3IKICAgICAgICAjIGJhY2tlbmRzIHdoaWNoIG5vdCBzdXBwb3J0ZWQgaXQgKHN1Y2ggYXMgdXNpbmcgbWluaW8gZm9yIGBzM2Agc3RvcmFnZSB0eXBlKSwgcGxlYXNlIGRpc2FibGUKICAgICAgICAjIGl0LiBUbyBkaXNhYmxlIHJlZGlyZWN0cywgc2ltcGx5IHNldCBgZGlzYWJsZXJlZGlyZWN0YCB0byBgdHJ1ZWAgaW5zdGVhZC4KICAgICAgICAjIFJlZmVyIHRvCiAgICAgICAgIyBodHRwczovL2dpdGh1Yi5jb20vZG9ja2VyL2Rpc3RyaWJ1dGlvbi9ibG9iL21hc3Rlci9kb2NzL2NvbmZpZ3VyYXRpb24ubWQjcmVkaXJlY3QKICAgICAgICAjIGZvciB0aGUgZGV0YWlsLgogICAgICAgIGRpc2FibGVyZWRpcmVjdDogZmFsc2UKICAgICAgICAjIFNwZWNpZnkgdGhlICJjYUJ1bmRsZVNlY3JldE5hbWUiIGlmIHRoZSBzdG9yYWdlIHNlcnZpY2UgdXNlcyBhIHNlbGYtc2lnbmVkIGNlcnRpZmljYXRlLgogICAgICAgICMgVGhlIHNlY3JldCBtdXN0IGNvbnRhaW4ga2V5cyBuYW1lZCAiY2EuY3J0IiB3aGljaCB3aWxsIGJlIGluamVjdGVkIGludG8gdGhlIHRydXN0IHN0b3JlCiAgICAgICAgIyBvZiByZWdpc3RyeSdzIGFuZCBjaGFydG11c2V1bSdzIGNvbnRhaW5lcnMuCiAgICAgICAgIyBjYUJ1bmRsZVNlY3JldE5hbWU6CiAgICAKICAgICAgICAjIFNwZWNpZnkgdGhlIHR5cGUgb2Ygc3RvcmFnZTogImZpbGVzeXN0ZW0iLCAiYXp1cmUiLCAiZ2NzIiwgInMzIiwgInN3aWZ0IiwKICAgICAgICAjICJvc3MiIGFuZCBmaWxsIHRoZSBpbmZvcm1hdGlvbiBuZWVkZWQgaW4gdGhlIGNvcnJlc3BvbmRpbmcgc2VjdGlvbi4gVGhlIHR5cGUKICAgICAgICAjIG11c3QgYmUgImZpbGVzeXN0ZW0iIGlmIHlvdSB3YW50IHRvIHVzZSBwZXJzaXN0ZW50IHZvbHVtZXMgZm9yIHJlZ2lzdHJ5CiAgICAgICAgIyBhbmQgY2hhcnRtdXNldW0KICAgICAgICB0eXBlOiBmaWxlc3lzdGVtCiAgICAgICAgZmlsZXN5c3RlbToKICAgICAgICAgIHJvb3RkaXJlY3Rvcnk6IC9zdG9yYWdlCiAgICAgICAgICAjbWF4dGhyZWFkczogMTAwCiAgICAgICAgYXp1cmU6CiAgICAgICAgICBhY2NvdW50bmFtZTogYWNjb3VudG5hbWUgIyByZXF1aXJlZAogICAgICAgICAgYWNjb3VudGtleTogYmFzZTY0ZW5jb2RlZGFjY291bnRrZXkgIyByZXF1aXJlZAogICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXJuYW1lICMgcmVxdWlyZWQKICAgICAgICAgIHJlYWxtOiBjb3JlLndpbmRvd3MubmV0ICMgb3B0aW9uYWwKICAgICAgICBnY3M6CiAgICAgICAgICBidWNrZXQ6IGJ1Y2tldG5hbWUgIyByZXF1aXJlZAogICAgICAgICAgIyBUaGUgYmFzZTY0IGVuY29kZWQganNvbiBmaWxlIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICAgIGVuY29kZWRrZXk6IGJhc2U2NC1lbmNvZGVkLWpzb24ta2V5LWZpbGUgIyBvcHRpb25hbAogICAgICAgICAgcm9vdGRpcmVjdG9yeTogbnVsbCAjIG9wdGlvbmFsCiAgICAgICAgICBjaHVua3NpemU6IDUyNDI4ODAgIyBvcHRpb25hbAogICAgICAgIHMzOgogICAgICAgICAgcmVnaW9uOiB1cy13ZXN0LTEgIyByZXF1aXJlZAogICAgICAgICAgYnVja2V0OiBidWNrZXRuYW1lICMgcmVxdWlyZWQKICAgICAgICAgIGFjY2Vzc2tleTogbnVsbCAjIGVnLCBhd3NhY2Nlc3NrZXkKICAgICAgICAgIHNlY3JldGtleTogbnVsbCAjIGVnLCBhd3NzZWNyZXRrZXkKICAgICAgICAgIHJlZ2lvbmVuZHBvaW50OiBudWxsICMgb3B0aW9uYWwsIGVnLCBodHRwOi8vbXlvYmplY3RzLmxvY2FsCiAgICAgICAgICBlbmNyeXB0OiBmYWxzZSAjIG9wdGlvbmFsCiAgICAgICAgICBrZXlpZDogbnVsbCAjIGVnLCBteWtleWlkCiAgICAgICAgICBzZWN1cmU6IHRydWUgIyBvcHRpb25hbAogICAgICAgICAgdjRhdXRoOiB0cnVlICMgb3B0aW9uYWwKICAgICAgICAgIGNodW5rc2l6ZTogbnVsbCAjIG9wdGlvbmFsCiAgICAgICAgICByb290ZGlyZWN0b3J5OiBudWxsICMgb3B0aW9uYWwKICAgICAgICAgIHN0b3JhZ2VjbGFzczogU1RBTkRBUkQgIyBvcHRpb25hbAogICAgICAgIHN3aWZ0OgogICAgICAgICAgYXV0aHVybDogaHR0cHM6Ly9zdG9yYWdlLm15cHJvdmlkZXIuY29tL3YzL2F1dGgKICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZQogICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcm5hbWUKICAgICAgICAgIHJlZ2lvbjogbnVsbCAjIGVnLCBmcgogICAgICAgICAgdGVuYW50OiBudWxsICMgZWcsIHRlbmFudG5hbWUKICAgICAgICAgIHRlbmFudGlkOiBudWxsICMgZWcsIHRlbmFudGlkCiAgICAgICAgICBkb21haW46IG51bGwgIyBlZywgZG9tYWlubmFtZQogICAgICAgICAgZG9tYWluaWQ6IG51bGwgIyBlZywgZG9tYWluaWQKICAgICAgICAgIHRydXN0aWQ6IG51bGwgIyBlZywgdHJ1c3RpZAogICAgICAgICAgaW5zZWN1cmVza2lwdmVyaWZ5OiBudWxsICMgYm9vbCBlZywgZmFsc2UKICAgICAgICAgIGNodW5rc2l6ZTogbnVsbCAjIGVnLCA1TQogICAgICAgICAgcHJlZml4OiBudWxsICMgZWcKICAgICAgICAgIHNlY3JldGtleTogbnVsbCAjIGVnLCBzZWNyZXRrZXkKICAgICAgICAgIGFjY2Vzc2tleTogbnVsbCAjIGVnLCBhY2Nlc3NrZXkKICAgICAgICAgIGF1dGh2ZXJzaW9uOiBudWxsICMgZWcsIDMKICAgICAgICAgIGVuZHBvaW50dHlwZTogbnVsbCAjIGVnLCBwdWJsaWMKICAgICAgICAgIHRlbXB1cmxjb250YWluZXJrZXk6IG51bGwgIyBlZywgZmFsc2UKICAgICAgICAgIHRlbXB1cmxtZXRob2RzOiBudWxsICMgZWcKICAgICAgICBvc3M6CiAgICAgICAgICBhY2Nlc3NrZXlpZDogYWNjZXNza2V5aWQKICAgICAgICAgIGFjY2Vzc2tleXNlY3JldDogYWNjZXNza2V5c2VjcmV0CiAgICAgICAgICByZWdpb246IHJlZ2lvbm5hbWUKICAgICAgICAgIGJ1Y2tldDogYnVja2V0bmFtZQogICAgICAgICAgZW5kcG9pbnQ6IG51bGwgIyBlZywgZW5kcG9pbnQKICAgICAgICAgIGludGVybmFsOiBudWxsICMgZWcsIGZhbHNlCiAgICAgICAgICBlbmNyeXB0OiBudWxsICMgZWcsIGZhbHNlCiAgICAgICAgICBzZWN1cmU6IG51bGwgIyBlZywgdHJ1ZQogICAgICAgICAgY2h1bmtzaXplOiBudWxsICMgZWcsIDEwTQogICAgICAgICAgcm9vdGRpcmVjdG9yeTogbnVsbCAjIGVnLCByb290ZGlyZWN0b3J5CiAgICAKICAgICMgVGhlIGh0dHAvaHR0cHMgbmV0d29yayBwcm94eSBmb3IgY2xhaXIsIGNvcmUsIGpvYnNlcnZpY2UsIHRyaXZ5CiAgICBwcm94eToKICAgICAgaHR0cFByb3h5OgogICAgICBodHRwc1Byb3h5OgogICAgICBub1Byb3h5OiAxMjcuMC4wLjEsbG9jYWxob3N0LC5sb2NhbCwuaW50ZXJuYWw=
kind: Secret
metadata:
  creationTimestamp: null
  name: extensions-values
---
apiVersion: kappctrl.k14s.io/v1alpha1
kind: App
metadata:
  name: extensions
  namespace: default
spec:
  serviceAccountName: extensions-deploy-sa
  deploy:
  - kapp:
      rawOptions:
      - --wait-timeout=5m
      - --kube-api-qps=20
      - --kube-api-burst=30
  fetch:
  - git:
      url: https://github.com/gorkemozlu/tanzu-gitops
      ref: origin/master
      subPath: apps/cluster-based/kapp/03-ytt
  template:
  - ytt:
      ignoreUnknownComments: true
      valuesFrom:
      - secretRef:
          name: extensions-values
---
apiVersion: v1
datastring:
  values.yaml: |
    ---
    tkgextensions:
      image: projects.registry.vmware.com/tkg/tkg-extensions-templates:v1.3.1_vmware.1
    shared:
      ingress: test.h2o-4-5564.h2o.vmware.com
    contour:
      deploy: true
      overlay: |
        infrastructure_provider: "vsphere"
        contour:
          image:
            repository: projects.registry.vmware.com/tkg
        envoy:
          image:
            repository: projects.registry.vmware.com/tkg
          service:
            type: "LoadBalancer"
    prometheus:
      deploy: true
      overlay: |
        monitoring:
          prometheus_server:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
          alertmanager:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
          kube_state_metrics:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
          node_exporter:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
          pushgateway:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
          cadvisor:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
          prometheus_server_configmap_reload:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
          prometheus_server_init_container:
            image:
              repository: projects.registry.vmware.com/tkg/prometheus
    grafana:
      deploy: true
      overlay: |
        monitoring:
          grafana:
            image:
              repository: "projects.registry.vmware.com/tkg/grafana"
            secret:
              type: "Opaque"
              admin_password: "Vk13YXJlMSE="
          grafana_init_container:
            image:
              repository: "projects.registry.vmware.com/tkg/grafana"
          grafana_sc_dashboard:
            image:
              repository: "projects.registry.vmware.com/tkg/grafana"
    efk:
      deploy:
        elasticsearch: true
        fluentbit: true
        kibana: true
      images:
        elasticsearch:
          elasticsearch: projects.registry.vmware.com/tanzu_meta_pocs/extensions/elasticsearch:7.2.1
          shell: projects.registry.vmware.com/tanzu_meta_pocs/extensions/bitnami-shell:10-debian-10-r138
        kibana:
          kibana: projects.registry.vmware.com/tanzu_meta_pocs/extensions/kibana:7.2.1
      overlay: |
        logging:
          image:
            repository: projects.registry.vmware.com/tkg
        tkg:
          instance_name: "TKG_INSTANCE_NAME"
          cluster_name: "CLUSTER_NAME"
        fluent_bit:
          output_plugin: "elasticsearch"
          elasticsearch:
            host: "elasticsearch"
            port: "9200"
    harbor:
      deploy: true
      overlay: |
        image:
          repository: projects.registry.vmware.com/tkg/harbor
          tag: v2.1.3_vmware.1
          pullPolicy: IfNotPresent
        namespace: tanzu-system-registry
        hostname: core.harbor.domain
        port:
          https: 443
        tlsCertificate:
          # [Required] the certificate
          tls.crt:
          # [Required] the private key
          tls.key:
          # [Optional] the certificate of CA, this enables the download
          # link on portal to download the certificate of CA
          ca.crt:
        
        # Use contour http proxy instead of the ingress when it's true
        enableContourHttpProxy: true
        
        # [Required] The initial password of Harbor admin.
        harborAdminPassword: "Harbor12345"
        
        # [Required] The secret key used for encryption. Must be a string of 16 chars.
        secretKey: 44z5mmTRiDAd3r7o
        
        database:
          # [Required] The initial password of the postgres database.
          password: 44z5mmTRiDAd3r7o
        
        core:
          replicas: 1
          # [Required] Secret is used when core server communicates with other components.
          secret: 44z5mmTRiDAd3r7o
          # [Required] The XSRF key. Must be a string of 32 chars.
          xsrfKey: DnvQN508M97mGmtK9248sCQ0pFD82BhV
        jobservice:
          replicas: 1
          # [Required] Secret is used when job service communicates with other components.
          secret: 44z5mmTRiDAd3r7o
        registry:
          replicas: 1
          # [Required] Secret is used to secure the upload state from client
          # and registry storage backend.
          # See: https://github.com/docker/distribution/blob/master/docs/configuration.md#http
          secret: 44z5mmTRiDAd3r7o
        notary:
          # Whether to install Notary
          enabled: true
        clair:
          # Whether to install Clair scanner
          enabled: true
          replicas: 1
          # The interval of clair updaters, the unit is hour, set to 0 to
          # disable the updaters
          updatersInterval: 12
        trivy:
          # enabled the flag to enable Trivy scanner
          enabled: true
          replicas: 1
          # gitHubToken the GitHub access token to download Trivy DB
          gitHubToken: ""
          # skipUpdate the flag to disable Trivy DB downloads from GitHub
          #
          # You might want to set the value of this flag to `true` in test or CI/CD environments to avoid GitHub rate limiting issues.
          # If the value is set to `true` you have to manually download the `trivy.db` file and mount it in the
          # `/home/scanner/.cache/trivy/db/trivy.db` path.
          skipUpdate: false
        
        # The persistence is always enabled and a default StorageClass
        # is needed in the k8s cluster to provision volumes dynamicly.
        # Specify another StorageClass in the "storageClass" or set "existingClaim"
        # if you have already existing persistent volumes to use
        #
        # For storing images and charts, you can also use "azure", "gcs", "s3",
        # "swift" or "oss". Set it in the "imageChartStorage" section
        persistence:
          persistentVolumeClaim:
            registry:
              # Use the existing PVC which must be created manually before bound,
              # and specify the "subPath" if the PVC is shared with other components
              existingClaim: ""
              # Specify the "storageClass" used to provision the volume. Or the default
              # StorageClass will be used(the default).
              # Set it to "-" to disable dynamic provisioning
              storageClass: ""
              subPath: ""
              accessMode: ReadWriteOnce
              size: 70Gi
            jobservice:
              existingClaim: ""
              storageClass: ""
              subPath: ""
              accessMode: ReadWriteOnce
              size: 3Gi
            database:
              existingClaim: ""
              storageClass: ""
              subPath: ""
              accessMode: ReadWriteOnce
              size: 3Gi
            redis:
              existingClaim: ""
              storageClass: ""
              subPath: ""
              accessMode: ReadWriteOnce
              size: 3Gi
            trivy:
              existingClaim: ""
              storageClass: ""
              subPath: ""
              accessMode: ReadWriteOnce
              size: 5Gi
          # Define which storage backend is used for registry and chartmuseum to store
          # images and charts. Refer to
          # https://github.com/docker/distribution/blob/master/docs/configuration.md#storage
          # for the detail.
          imageChartStorage:
            # Specify whether to disable `redirect` for images and chart storage, for
            # backends which not supported it (such as using minio for `s3` storage type), please disable
            # it. To disable redirects, simply set `disableredirect` to `true` instead.
            # Refer to
            # https://github.com/docker/distribution/blob/master/docs/configuration.md#redirect
            # for the detail.
            disableredirect: false
            # Specify the "caBundleSecretName" if the storage service uses a self-signed certificate.
            # The secret must contain keys named "ca.crt" which will be injected into the trust store
            # of registry's and chartmuseum's containers.
            # caBundleSecretName:
        
            # Specify the type of storage: "filesystem", "azure", "gcs", "s3", "swift",
            # "oss" and fill the information needed in the corresponding section. The type
            # must be "filesystem" if you want to use persistent volumes for registry
            # and chartmuseum
            type: filesystem
            filesystem:
              rootdirectory: /storage
              #maxthreads: 100
            azure:
              accountname: accountname # required
              accountkey: base64encodedaccountkey # required
              container: containername # required
              realm: core.windows.net # optional
            gcs:
              bucket: bucketname # required
              # The base64 encoded json file which contains the key
              encodedkey: base64-encoded-json-key-file # optional
              rootdirectory: null # optional
              chunksize: 5242880 # optional
            s3:
              region: us-west-1 # required
              bucket: bucketname # required
              accesskey: null # eg, awsaccesskey
              secretkey: null # eg, awssecretkey
              regionendpoint: null # optional, eg, http://myobjects.local
              encrypt: false # optional
              keyid: null # eg, mykeyid
              secure: true # optional
              v4auth: true # optional
              chunksize: null # optional
              rootdirectory: null # optional
              storageclass: STANDARD # optional
            swift:
              authurl: https://storage.myprovider.com/v3/auth
              username: username
              password: password
              container: containername
              region: null # eg, fr
              tenant: null # eg, tenantname
              tenantid: null # eg, tenantid
              domain: null # eg, domainname
              domainid: null # eg, domainid
              trustid: null # eg, trustid
              insecureskipverify: null # bool eg, false
              chunksize: null # eg, 5M
              prefix: null # eg
              secretkey: null # eg, secretkey
              accesskey: null # eg, accesskey
              authversion: null # eg, 3
              endpointtype: null # eg, public
              tempurlcontainerkey: null # eg, false
              tempurlmethods: null # eg
            oss:
              accesskeyid: accesskeyid
              accesskeysecret: accesskeysecret
              region: regionname
              bucket: bucketname
              endpoint: null # eg, endpoint
              internal: null # eg, false
              encrypt: null # eg, false
              secure: null # eg, true
              chunksize: null # eg, 10M
              rootdirectory: null # eg, rootdirectory
        
        # The http/https network proxy for clair, core, jobservice, trivy
        proxy:
          httpProxy:
          httpsProxy:
          noProxy: 127.0.0.1,localhost,.local,.internal
kind: Secret
metadata:
  creationTimestamp: null
  name: extensions-values-datastring